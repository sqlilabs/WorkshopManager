@(message: String, workshops: List[Workshop])

@import helper._

@main(message) {

@if(workshops.isEmpty()) {
	<div class="row-fluid workshop-bloc">
		<div class="span12 well">
			@Messages("welcome.no.workshops")
		</div>
	</div>
	
} else {
	@for(workshop <- workshops) { 
	<div class="row-fluid workshop-bloc">
		<div class="span12 well">
			<div class="container-fluid">
				<div class="row-fluid">
				<div class="span10">
						<h3>@workshop.getSubject</h3>
					</div>
				</div>
			<div class="span1 floatRight speakerPicture">
				@for(speaker <- workshop.getSpeakers()) { 
					<img width="48" height="48"
						src="@speaker.getPicture()" />
				}
				@if( AuthentificationController.getUser() != null && !workshop.getSpeakers().contains(AuthentificationController.getUser())) {
					<a href="@routes.WorkshopController.addSpeaker( workshop.getId )" title="Se proposer en tant que Speaker" >
						<img width="48" height="48"
							src="@routes.Assets.at("images/addUser.png")" />
					</a>
				}
				@if( AuthentificationController.getUser() != null && workshop.getSpeakers().contains(AuthentificationController.getUser())) {
					<a href="@routes.WorkshopController.removeSpeaker( workshop.getId )" title="Se retirer de la liste des Speakers" >
						<img width="48" height="48"
							src="@routes.Assets.at("images/removeUser.png")" />
					</a>
				}	
				
			</div>
				<div class="row-fluid">
					<div class="span3">
						<img 
							src="@routes.Assets.at(workshop.getImage)" />
					</div>
					<div class="span9">
						<div>
							@Html(workshop.getDescription)
						</div>
					</div>
				</div>
			</div>
		</div>
			<div class="row-fluid">
				<span class="span10">
					Il y a @workshop.getPotentialParticipants().size() personne(s) intéressée(s) par ce workshop :
				</span>
			</div>
			<div class="row-fluid littleMarginTop">
				<span class="span10 participantPicture">
					@if( AuthentificationController.getUser() != null && !workshop.getPotentialParticipants().contains(AuthentificationController.getUser()) ) {
						<a href="@routes.WorkshopController.addParticipant( workshop.getId )" title="Je suis intéressé par ce Workshop" >
							<img width="32" height="32"
								src="@routes.Assets.at("images/addUser.png")" />
						</a>
					}
					@if( AuthentificationController.getUser() != null && workshop.getPotentialParticipants().contains(AuthentificationController.getUser()) ) {
						<a href="@routes.WorkshopController.removeParticipant( workshop.getId )" title="J'aimerai me retirer de la liste des gens intéressés par ce Workshop" >
							<img width="32" height="32"
								src="@routes.Assets.at("images/removeUser.png")" />
						</a>
					}
					@for(participant <- workshop.getPotentialParticipants()) { 
						<img width="32" height="32"
							src="@participant.getPicture()" />
					}
				</span>
			</div>
			<div class="row-fluid">
				<div class="span12 alignToRight">
					@if( AuthentificationController.isAuthenticatedUserAdmin() || AuthentificationController.isAuthor( workshop ) ) {
						<a href="#" data-link="@routes.WorkshopController.deleteWorkshop(workshop.getId)" class="btn btn-danger">@Messages("welcome.workshop.delete")</a>
						<a href="@routes.WorkshopController.modifyWorkshop(workshop.getId)" class="btn btn-info">@Messages("welcome.workshop.edit")</a>
					}
					@if( AuthentificationController.isAuthenticatedUserAdmin() ) {
						<a href="@routes.WorkshopController.planWorkshop(workshop.getId)" class="btn btn-success">@Messages("welcome.workshop.plan")</a>
					}
				</div>
			</div>
			
			<div id="modal-suppression-confirm" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-header">
				  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				  <h3 id="myModalLabel">@Messages("welcome.workshop.delete.modal.title")</h3>
				</div>
				<div class="modal-body center-text">
				  <img src="@routes.Assets.at("images/confirm_48.png")" />
				  <div class="modal-suppression-text">@Messages("welcome.workshop.delete.modal.text")</div>
				</div>
				<div class="modal-footer">
				  <button class="btn" data-dismiss="modal" aria-hidden="true">@Messages("welcome.workshop.delete.modal.no")</button>
				  <button class="btn btn-danger" id="valid-suppression">@Messages("welcome.workshop.delete.modal.yes")</button>
				</div>
			</div>
	
	}
}
}
